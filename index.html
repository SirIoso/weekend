<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Weekend Roster Generator</title>

<style>
  body {
    font-family: Arial, sans-serif;
    padding: 5px;
  }
  input, button {
    padding: 8px;
    font-size: 16px;
    margin: 5px 0;
  }
  table {
    border-collapse: collapse;
    width: 360px;
    margin-top: 20px;
  }
  th, td {
    border: 1px solid #ccc;
    padding: 8px;
    text-align: center;
  }
  .no-weekend {
    background-color: #FBE2D5; /* Previous Saturday & last Sunday of 12 weeks */
  }
  .extra-week {
    background-color: #DAE9F8; /* 4 extra weeks */
  }
</style>
</head>

<body>

<h1>Weekend Roster Generator</h1>

<label for="startDate">Select Start Date:</label><br>
<input type="date" id="startDate">
<button onclick="generateWeekends()">Generate Roster</button>

<table id="weekendTable">
  <thead>
    <tr>
      <th>Day</th>
      <th>Date</th>
    </tr>
  </thead>
  <tbody></tbody>
</table>

<script>
function generateWeekends() {
  const input = document.getElementById('startDate').value;
  if (!input) {
    alert('Please select a start date!');
    return;
  }

  const [year, month, day] = input.split('-').map(Number);
  const inputDate = new Date(year, month - 1, day);

  if (isNaN(inputDate)) {
    alert('Invalid date');
    return;
  }

  function formatDate(date) {
    const d = date.getDate().toString().padStart(2, '0');
    const m = ["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"][date.getMonth()];
    const y = date.getFullYear();
    return `${d}-${m}-${y}`;
  }

  const tableBody = document.querySelector('#weekendTable tbody');
  tableBody.innerHTML = '';

  const weekends = [];

  let currentSaturday, currentSunday;
  let firstCycle = true;

  // Previous Saturday if input is Sunday
  if (inputDate.getDay() === 0) {
    const prevSat = new Date(inputDate);
    prevSat.setDate(inputDate.getDate() - 1);
    weekends.push({ day: "No Weekend", date: prevSat, highlight: true });

    currentSaturday = new Date(inputDate);
    currentSaturday.setDate(inputDate.getDate() + 6);
    currentSunday = new Date(currentSaturday);
    currentSunday.setDate(currentSaturday.getDate() + 1);

  } else if (inputDate.getDay() === 6) {
    currentSaturday = new Date(inputDate);
    currentSunday = new Date(currentSaturday);
    currentSunday.setDate(currentSaturday.getDate() + 1);

  } else {
    currentSaturday = new Date(inputDate);
    currentSaturday.setDate(inputDate.getDate() - ((inputDate.getDay() + 1) % 7));
    currentSunday = new Date(currentSaturday);
    currentSunday.setDate(currentSaturday.getDate() + 1);
  }

  // Add 12-week pairs
  for (let i = 0; i < 12; i++) {
    const sat = new Date(currentSaturday);
    sat.setDate(currentSaturday.getDate() + i * 7);
    const sun = new Date(currentSunday);
    sun.setDate(currentSunday.getDate() + i * 7);

    weekends.push({ day: "Sat", date: sat, highlight: false });
    weekends.push({ day: "Sun", date: sun, highlight: false });
  }

  // Only mark the last Sunday of the 12-week pair if input is Sunday
  if (inputDate.getDay() === 0) {
    const lastSundayIndex = weekends.length - 1;
    weekends[lastSundayIndex] = {
      day: "No Weekend",
      date: weekends[lastSundayIndex].date,
      highlight: true
    };
  }

  // Add 4 extra weeks after the last 12-week pair
  const lastDate = weekends[weekends.length - 1].date;
  let extraSaturday = new Date(lastDate);
  let extraSunday = new Date(lastDate);

  if (extraSaturday.getDay() === 6) {
    extraSaturday.setDate(extraSaturday.getDate() + 7);
    extraSunday.setDate(extraSaturday.getDate() + 1);
  } else if (extraSaturday.getDay() === 0) {
    extraSaturday.setDate(extraSaturday.getDate() + 6);
    extraSunday.setDate(extraSaturday.getDate() + 1);
  }

  for (let i = 0; i < 4; i++) {
    const sat = new Date(extraSaturday);
    sat.setDate(extraSaturday.getDate() + i * 7);
    const sun = new Date(extraSunday);
    sun.setDate(extraSunday.getDate() + i * 7);

    weekends.push({ day: "No Weekend", date: sat, extra: true });
    weekends.push({ day: "No Weekend", date: sun, extra: true });
  }

  // Sort chronologically
  weekends.sort((a, b) => a.date - b.date);

  // Build table
  weekends.forEach(item => {
    const row = tableBody.insertRow();
    row.insertCell(0).textContent = item.day;
    row.insertCell(1).textContent = formatDate(item.date);
    if (item.highlight) row.classList.add('no-weekend'); // #FBE2D5
    if (item.extra) row.classList.add('extra-week');      // #DAE9F8
  });
}
</script>

</body>
</html>
